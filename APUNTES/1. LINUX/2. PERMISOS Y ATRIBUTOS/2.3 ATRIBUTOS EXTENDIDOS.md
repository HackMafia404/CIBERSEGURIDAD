# ATRIBUTOS EXTENDIDOS
_______
tags: #linux #comandos #atributos #permisos #ficheros #archivos 
________
En Linux, además de los permisos clásicos **(rwx)**, los archivos y directorios pueden tener **atributos especiales a nivel de sistema de archivos**.  
Estos atributos se aplican principalmente en **ext2, ext3 y ext4**, y se usan para controlar cómo se puede modificar o manipular un archivo.

### 1. Listar Atributros

>lsattr archivo.txt
>lsattr -a   # mostrar también archivos ocultos
>lsattr -R   # recursivo en directorios
>lsattr -d   # muestra atributos de un directorio sin listar su contenido

```Bash
> lsattr documento.txt
----i--------e-- documento.txt
```

### 2. Modificar Atributos

>chattr [+/-/=] atributos archivo

- + → añade un atributo 
- - → elimina un atributo
- = → asigna solo los atributos indicados

```bash
> chattr +i documento.txt   # Vuelve el archivo inmutable
> chattr -i documento.txt   # Quita la inmutabilidad
> chattr +a log.txt         # Solo permite agregar datos (append-only)
```

### 3. Listado de Atributos

| Atributo | Descripción                                                                                               |
| -------- | --------------------------------------------------------------------------------------------------------- |
| **a**    | Append-only → solo se pueden agregar datos al archivo (no sobrescribir ni borrar). Muy usado en **logs**. |
| **A**    | No actualizar `atime` (tiempo de último acceso). Útil para mejorar rendimiento en discos grandes.         |
| **c**    | Almacena el archivo **comprimido automáticamente** en disco. (poco usado).                                |
| **C**    | Desactiva la **copia en escritura (COW)** en sistemas de archivos como Btrfs.                             |
| **d**    | Excluye el archivo de **backups con dump**.                                                               |
| **D**    | Escribe de forma **sincrónica** los cambios en directorios (más lento pero seguro).                       |
| **e**    | Usa **extents** (bloques contiguos), es el modo normal en ext4.                                           |
| **E**    | Marca errores de extensión (usado por el sistema para debug).                                             |
| **i**    | Inmutable → el archivo **no puede ser modificado, borrado, renombrado ni vinculado**. Protección máxima.  |
| **j**    | El contenido se escribe primero en el **journal** antes de grabarse (seguridad en caídas de energía).     |
| **s**    | Secure delete → al borrar, los bloques se sobreescriben con **ceros**.                                    |
| **S**    | Synchronous updates → cada cambio se escribe inmediatamente en disco.                                     |
| **t**    | El archivo no puede ser parte de optimizaciones de **tail-merging**.                                      |
| **T**    | Marca un directorio como "top level" para mejorar rendimiento en ext4.                                    |
| **u**    | Undelete → al borrar, el contenido puede recuperarse (no siempre soportado).                              |
