# SCRIPTING EN BASH
___
tags: #linux #archivos #archivos #comandos #ficheros #gestion 
___
Es un archivo que contiene una secuencia de comandos que son ejecutados por el programa de bash línea por línea. Te permite realizar una serie de acciones, tales como Automatizar tareas, configurar sistemas, y ejecutar un proceso usando la línea de comando.

## Tipos de Estructura

La Estructura de nuestro Scrpting en Bash es muy importante, porque en ella se establece el proceso que se efectuara en el sistema. Las estructuras que componen el scripting en Bash son las siguientes:

1. Funciones
2. Variables
3. Condicionales
4. Bucles
5. Selection Multiple

### 1. Funciones

- Las funciones permiten agrupar comandos bajo un mismo nombre. 
- Facilitan la reutilización del código dentro de un script.
- Ayudan a evitar repeticiones y hacen el script más ordenado. 
- Mejoran la legibilidad y el mantenimiento del código. 
- Son útiles para dividir tareas complejas en partes más simples.

```Bash
1 function ctrl_c () {
2 echo -e "\n [+] Saliendo ... "
3 exit 1
4 }
5
6 trap ctrl_c INT
```

### 2. Variables

- Las variables sirven para almacenar y manipular datos que pueden cambiar durante la ejecución de un script, permitiendo que este sea más flexible, reutilizable y automatizado.
- Son ampliamente utilizadas para guardar información como rutas, nombres de archivos, resultados de comandos, opciones del usuario y valores numérico o de texto.

```Bash
1 #!/ bin / bash
2
3 nombre =" Lucas "
4 apellido =" Jimenez "
5 edad =25
6 ciudad =" Bogota "
7 mensaje ="Hola , mi nombre es $nombre $apellido ,
tengo $edad años y vivo en $ciudad ."
8
9 echo " $mensaje "
```

### 3. Condicionales

- Las condicionales permiten que el script tome decisiones según si se cumple o no una condición específica. 
- Se utilizan para ejecutar distintas acciones dependiendo del resultado de comparaciones entre valores, archivos, cadenas o estados del sistema. 
- Son fundamentales para controlar el flujo del programa, verificar si existen archivos, comprobar permisos, validar entradas del usuario o realizar operaciones solo cuando ciertas condiciones se cumplen, haciendo el script más dinámico e inteligente.

```Bash
1 #!/ bin / bash
2
3 usuario =$( whoami )
4
5 if [ " $usuario " == " root " ]; then
6 echo " Eres el usuario root ."
7 elif [ " $usuario " == " admin " ]; then
8 echo " Eres un administrador ."
9 else
10 echo "No tienes privilegios administrativos
."
11 fi
```

### 4. Bucles

- Los bucles permiten ejecutar un conjunto de instrucciones repetidamente, lo que es útil para automatizar tareas que se repiten, como procesar archivos, recorrer listas, esperar condiciones o realizar operaciones por lotes. 
- Existen varios tipos de bucles, como for, while y until, y cada uno se adapta adistintos escenarios según la necesidad. 
- Su uso facilita escribir scripts más eficientes, reduciendo la repetición de código y mejorando la productividad en la automatización de procesos.

```Bash
1 archivo1 =" data .gz"
2 descomprimir ="$(7z l data .gz | tail -n 3 | head
-n 1 | awk ’NF{ print $NF } ’)"
3
4 7z x $archivo1 & >/ dev / null
5
6 while [ $descomprimir ]; do
7 echo -e "\n${y }[+] ${e} ${t} Archivo ->
$descomprimir$ {e} ${p}- DESCOMPRESION
EXITOSA -${e}\n"
8 7z x $descomprimir & >/ dev / null
9 descomprimir ="$(7z l $descomprimir 2 >/ dev /
null | tail -n 3 | head -n 1 | awk ’NF{
print $NF } ’)";
10 done
```

### 5. Seleccion Multiple

- La selección múltiple, generalmente implementada con la estructura ‘case‘, se utiliza para ejecutar diferentes bloques de código según el valor de una variable. 
- Es útil cuando se deben manejar múltiples opciones posibles, como menús, respuestas del usuario o tipos de archivos, ofreciendo una forma más clara y organizada que varios ‘if-elif‘. 
- Facilita la lectura y mantenimiento del código, especialmente cuando se esperan muchas condiciones distintas que dependen de un solo valor.

```Bash
1 #!/ bin / bash
2 echo " Selecciona una opci ón:"
3 echo "1) Saludar "
4 echo "2) Mostrar fecha "
5 echo "3) Salir "
6 read -p " Opci ón: " opcion
7 case $opcion in
8 1)
9 echo "Hola , bienvenido al script ."
10 ;;
11 2)
12 echo "La fecha actual es: $( date )"
13 ;;
14 3)
15 echo " Saliendo ... "
16 ;;
17 *)
18 echo " Opci ón no vá lida ."
19 ;;
20 esac
```

## Descompresor 

```Bash
1 #!/ bin/ bash
2
3 # Colours
4 g="\e [0;32 m \033[1 m" # green # code
5 e=" \033[0 m\e[0m" # end
6 r="\e [0;31 m \033[1 m" # red # error
7 b="\e [0;34 m \033[1 m" # blue # information
8 y="\e [0;33 m \033[1 m" # yellow # caracters
9 p="\e [0;35 m \033[1 m" # purple # important
10 t="\e [0;36 m \033[1 m" # turquoise # highlight
11 gr ="\e [0;37 m \033[1 m" # gray # unimportant
12
13 trap ctrl_c INT
14
15 function ctrl_c () {
16 echo -e "\n\n${r }[+] Saliendo del Programa ... ${e}\n\n"
17 exit 1
18 }
19
20 archivo1 =" data12 .gz"
21
22 descomprimir ="$(7z l data12 .gz | tail -n 3 | head -n 1 | awk ’NF{ print $NF } ’)"
23
24 7z x $archivo1 & >/ dev / null
25
26
27 while [ $descomprimir ]; do
28 echo -e "\n${y }[+] ${e} ${p}Se Descomprimio el arhcivo $descomprimir$ {e}"
29 7z x $descomprimir & >/ dev / null
30 descomprimir ="$(7z l $descomprimir 2 >/ dev / null | tail -n 3 | head -n 1 | awk ’NF{ print $NF } ’)"
31
32 done
```



